<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Map</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiZ2dpYW5uMDIiLCJhIjoiY2xwbXh1eGlzMDN5MjJqbW1qY2I3ZTRhbiJ9.OvzQUjKS7Vgr63ckOc2N_w';

        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/ggiann02/clpw1hmir00xr01p64y2p18xh',
            center: [9.3561335, 45.4732865],
            zoom: 15
        });

        // Add navigation control to the map
        map.addControl(new mapboxgl.NavigationControl());

        // Load and display points from CSV file
        map.on('load', function () {
            // Load CSV data
            fetch('points.csv')
                .then(response => response.text())
                .then(data => {
                    // Parse CSV data
                    var points = Papa.parse(data, { header: true }).data;

                    // Add points to the map
                    map.addSource('points', {
                        type: 'geojson',
                        data: {
                            type: 'FeatureCollection',
                            features: points.map(point => ({
                                type: 'Feature',
                                geometry: {
                                    type: 'Point',
                                    coordinates: [parseFloat(point.longitude), parseFloat(point.latitude)]
                                },
                                properties: {
                                    title: point.message,
                                }
                            }))
                        }
                    });

                    map.addLayer({
                        id: 'points',
                        type: 'circle',
                        source: 'points',
                        paint: {
                            'circle-radius': 6,
                            'circle-color': '#FF0000'
                        }
                    });
                });
        });
    </script>
</body>
</html>
